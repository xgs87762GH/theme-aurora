/* ============================================
   Layout Styles - 布局样式
   ============================================ */

/* Top Banner - 顶部大图 */
.aurora-top-banner {
  position: relative;
  width: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  overflow: hidden;
}

.aurora-top-banner-full {
  height: 100vh;
  min-height: 600px;
}

.aurora-top-banner-half {
  height: 50vh;
  min-height: 400px;
}

.aurora-top-banner-third {
  height: 33.333vh;
  min-height: 300px;
}

.aurora-top-banner-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0.1) 0%,
    rgba(0, 0, 0, 0.3) 50%,
    rgba(0, 0, 0, 0.6) 100%
  );
  z-index: 1;
  transition: opacity 0.3s ease;
}

.aurora-top-banner-content {
  position: relative;
  z-index: 2;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

/* ============================================
   Three Column Layout - 三栏布局系统
   ============================================ */

/* aurora-body: 控制整体宽度和居中 */
.aurora-body {
  width: 100%;
  margin: 0 auto;
  padding: 0;
  box-sizing: border-box;
}


/* 移动端：全屏 */
@media (max-width: 767px) {
  .aurora-body {
    width: 100%;
    max-width: 100%;
  }
}

/* Sidebar Base Styles - 侧边栏基础样式 */
.aurora-left-sidebar,
.aurora-right-sidebar {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  min-width: 0;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 确保侧边栏内的卡片和组件占满宽度 */
.aurora-left-sidebar > *,
.aurora-right-sidebar > * {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 桌面端：70% 宽度，最大 1000px */
@media (min-width: 1024px) {
  .aurora-body {
    width: 70%;
    max-width: 1000px;
  }
}

/* 大屏桌面：68% 宽度，最大 1200px */
@media (min-width: 1280px) {
  .aurora-body {
    width: 68%;
    max-width: 1200px;
  }
}

/* 超大屏：65% 宽度，最大 1400px */
@media (min-width: 1536px) {
  .aurora-body {
    width: 65%;
    max-width: 1400px;
  }
}

/* aurora-three-column: 内部 grid 布局 */
.aurora-three-column {
  display: grid;
  gap: 0.5rem;
  width: 100%;
  box-sizing: border-box;
}

/* 移动端：单列布局 */
@media (max-width: 767px) {
  .aurora-three-column {
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }
}

/* 平板端及以上：根据侧边栏自动调整 */
@media (min-width: 768px) {
  /* 三栏布局：左侧栏 + 主内容 + 右侧栏 */
  .aurora-three-column:has(.aurora-left-sidebar):has(.aurora-right-sidebar) {
    grid-template-columns: 22% 1fr 22%;
    gap: 0.5rem;
  }

  /* 左+主布局：左侧栏 + 主内容 */
  .aurora-three-column:has(.aurora-left-sidebar):not(:has(.aurora-right-sidebar)) {
    grid-template-columns: 22% 1fr;
    gap: 0.5rem;
  }

  /* 主+右布局：主内容 + 右侧栏 */
  .aurora-three-column:not(:has(.aurora-left-sidebar)):has(.aurora-right-sidebar) {
    grid-template-columns: 1fr 22%;
    gap: 0.5rem;
  }

  /* 仅主内容：单列 */
  .aurora-three-column:not(:has(.aurora-left-sidebar)):not(:has(.aurora-right-sidebar)) {
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }
}

/* 桌面端：调整侧边栏宽度 */
@media (min-width: 1024px) {
  .aurora-three-column:has(.aurora-left-sidebar):has(.aurora-right-sidebar) {
    grid-template-columns: 20% 1fr 20%;
    gap: 0.625rem;
  }

  .aurora-three-column:has(.aurora-left-sidebar):not(:has(.aurora-right-sidebar)) {
    grid-template-columns: 20% 1fr;
    gap: 0.625rem;
  }

  .aurora-three-column:not(:has(.aurora-left-sidebar)):has(.aurora-right-sidebar) {
    grid-template-columns: 1fr 20%;
    gap: 0.625rem;
  }
}

/* 大屏桌面：调整侧边栏宽度 */
@media (min-width: 1280px) {
  .aurora-three-column:has(.aurora-left-sidebar):has(.aurora-right-sidebar) {
    grid-template-columns: 22% 1fr 22%;
    gap: 0.75rem;
  }

  .aurora-three-column:has(.aurora-left-sidebar):not(:has(.aurora-right-sidebar)) {
    grid-template-columns: 22% 1fr;
    gap: 0.75rem;
  }

  .aurora-three-column:not(:has(.aurora-left-sidebar)):has(.aurora-right-sidebar) {
    grid-template-columns: 1fr 22%;
    gap: 0.75rem;
  }
}

/* 超大屏：调整侧边栏宽度 */
@media (min-width: 1536px) {
  .aurora-three-column:has(.aurora-left-sidebar):has(.aurora-right-sidebar) {
    grid-template-columns: 24% 1fr 24%;
    gap: 0.875rem;
  }

  .aurora-three-column:has(.aurora-left-sidebar):not(:has(.aurora-right-sidebar)) {
    grid-template-columns: 24% 1fr;
    gap: 0.875rem;
  }

  .aurora-three-column:not(:has(.aurora-left-sidebar)):has(.aurora-right-sidebar) {
    grid-template-columns: 1fr 24%;
    gap: 0.875rem;
  }
}

/* 兼容不支持 :has() 的浏览器 - 使用类名作为后备方案 */
.aurora-three-column.layout-three-column {
  grid-template-columns: 22% 1fr 22%;
}

.aurora-three-column.layout-left-main {
  grid-template-columns: 22% 1fr;
}

.aurora-three-column.layout-main-right {
  grid-template-columns: 1fr 22%;
}

.aurora-three-column.layout-main-only {
  grid-template-columns: 1fr;
}

@media (min-width: 1024px) {
  .aurora-three-column.layout-three-column {
    grid-template-columns: 20% 1fr 20%;
  }

  .aurora-three-column.layout-left-main {
    grid-template-columns: 20% 1fr;
  }

  .aurora-three-column.layout-main-right {
    grid-template-columns: 1fr 20%;
  }
}

@media (min-width: 1280px) {
  .aurora-three-column.layout-three-column {
    grid-template-columns: 22% 1fr 22%;
  }

  .aurora-three-column.layout-left-main {
    grid-template-columns: 22% 1fr;
  }

  .aurora-three-column.layout-main-right {
    grid-template-columns: 1fr 22%;
  }
}

@media (min-width: 1536px) {
  .aurora-three-column.layout-three-column {
    grid-template-columns: 24% 1fr 24%;
  }

  .aurora-three-column.layout-left-main {
    grid-template-columns: 24% 1fr;
  }

  .aurora-three-column.layout-main-right {
    grid-template-columns: 1fr 24%;
  }
}

/* Sidebar Base Styles - 侧边栏基础样式 */
.aurora-left-sidebar,
.aurora-right-sidebar {
  display: block;
  min-width: 0;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 确保侧边栏内的卡片和组件占满宽度 */
.aurora-left-sidebar > *,
.aurora-right-sidebar > * {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  margin-bottom: 1.5rem;
}

.aurora-left-sidebar > *:last-child,
.aurora-right-sidebar > *:last-child {
  margin-bottom: 0;
}

/* Main Content - 主内容区 */
.aurora-main-content {
  min-width: 0;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.aurora-main-content-inner {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Post List Container - 文章列表容器 */
#post-list-container {
  overflow: hidden;
}

/* 防止内容溢出 */
.aurora-main-content > *,
.aurora-main-content-inner > * {
  max-width: 100%;
  overflow-x: hidden;
  box-sizing: border-box;
}

/* 防止侧边栏和主内容溢出 */
.aurora-left-sidebar *,
.aurora-right-sidebar *,
.aurora-main-content * {
  max-width: 100%;
  word-wrap: break-word;
  box-sizing: border-box;
}

/* Sticky Sidebar - 粘性侧边栏 */
/* 桌面端及以上才应用磁吸效果 */
@media (min-width: 768px) {
  /* 贴近导航栏磁吸 */
  .aurora-sidebar-sticky-header {
    position: sticky;
    top: 4rem; /* 导航栏高度 */
    max-height: calc(100vh - 4rem);
    align-self: flex-start;
    overflow-y: auto;
  }

  /* 独立磁吸 */
  .aurora-sidebar-sticky-independent {
    position: sticky;
    top: 1.5rem; /* 顶部边距，与主内容一致 */
    max-height: calc(100vh - 1.5rem);
    align-self: flex-start;
    overflow-y: auto;
  }
}

/* 当有 TOC 时，调整其他小部件的 sticky 位置 */
@media (min-width: 768px) {
  .aurora-sidebar:has(.toc-container) .aurora-sidebar-sticky-header,
  .aurora-sidebar:has(.toc-container) .aurora-sidebar-sticky-independent {
    position: sticky !important;
    top: calc(4rem + 20rem) !important; /* 导航栏高度(4rem) + 目录高度(约20rem) */
    max-height: calc(100vh - 24rem) !important;
    align-self: flex-start !important;
    overflow-y: auto !important;
  }

  /* 兼容不支持 :has() 的浏览器 */
  .aurora-sidebar-with-toc .aurora-sidebar-sticky-header,
  .aurora-sidebar-with-toc .aurora-sidebar-sticky-independent {
    position: sticky !important;
    top: calc(4rem + 20rem) !important;
    max-height: calc(100vh - 24rem) !important;
    align-self: flex-start !important;
    overflow-y: auto !important;
  }
}

/* Scrollbar Styles - 滚动条样式 */
.aurora-sidebar-sticky-header::-webkit-scrollbar,
.aurora-sidebar-sticky-independent::-webkit-scrollbar {
  width: 6px;
}

.aurora-sidebar-sticky-header::-webkit-scrollbar-track,
.aurora-sidebar-sticky-independent::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 3px;
}

.aurora-sidebar-sticky-header::-webkit-scrollbar-thumb,
.aurora-sidebar-sticky-independent::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.5);
  border-radius: 3px;
  transition: background 0.2s ease;
}

.aurora-sidebar-sticky-header::-webkit-scrollbar-thumb:hover,
.aurora-sidebar-sticky-independent::-webkit-scrollbar-thumb:hover {
  background: rgba(148, 163, 184, 0.7);
}

.dark .aurora-sidebar-sticky-header::-webkit-scrollbar-thumb,
.dark .aurora-sidebar-sticky-independent::-webkit-scrollbar-thumb {
  background: rgba(71, 85, 105, 0.5);
}

.dark .aurora-sidebar-sticky-header::-webkit-scrollbar-thumb:hover,
.dark .aurora-sidebar-sticky-independent::-webkit-scrollbar-thumb:hover {
  background: rgba(71, 85, 105, 0.7);
}

/* 移动端：侧边栏在底部显示 */
@media (max-width: 767px) {
  .aurora-three-column {
    display: flex;
    flex-direction: column;
  }

  .aurora-left-sidebar,
  .aurora-right-sidebar {
    order: 2;
  }

  .aurora-main-content {
    order: 1;
  }

  .aurora-sidebar-sticky-header,
  .aurora-sidebar-sticky-independent {
    position: static;
    max-height: none;
    overflow-y: visible;
  }
}

/* 平板端：三栏布局时，左侧栏移到下方 */
@media (min-width: 768px) and (max-width: 1023px) {
  .aurora-three-column:has(.aurora-left-sidebar):has(.aurora-right-sidebar) {
    grid-template-columns: 1fr 22%;
  }

  .aurora-three-column:has(.aurora-left-sidebar):has(.aurora-right-sidebar) .aurora-left-sidebar {
    order: 3;
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
}

/* 兼容不支持 :has() 的浏览器 - 平板端 */
@media (min-width: 768px) and (max-width: 1023px) {
  .aurora-three-column.layout-three-column {
    grid-template-columns: 1fr 22%;
  }

  .aurora-three-column.layout-three-column .aurora-left-sidebar {
    order: 3;
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
}

/* ============================================
   Footer Container - 页脚容器
   ============================================ */

/* Footer Container - 页脚容器，与内容区域对齐 */
/* 与 aurora-body 保持一致的宽度设置 */
.aurora-footer-container {
  width: 100%;
  margin: 0 auto;
  padding: 0 1rem;
  box-sizing: border-box;
}

/* 移动端：全屏 */
@media (max-width: 767px) {
  .aurora-footer-container {
    width: 100%;
    max-width: 100%;
    padding: 0 1rem;
  }
}

/* 桌面端：70% 宽度，最大 1000px */
@media (min-width: 1024px) {
  .aurora-footer-container {
    width: 70%;
    max-width: 1000px;
    padding: 0 1.5rem;
  }
}

/* 大屏桌面：68% 宽度，最大 1200px */
@media (min-width: 1280px) {
  .aurora-footer-container {
    width: 68%;
    max-width: 1200px;
    padding: 0 1.5rem;
  }
}

/* 超大屏：65% 宽度，最大 1400px */
@media (min-width: 1536px) {
  .aurora-footer-container {
    width: 65%;
    max-width: 1400px;
    padding: 0 2rem;
  }
}

/* ============================================
   Header - 导航栏样式
   ============================================ */

/* 移动端菜单按钮：只在移动端显示（< 640px），桌面端隐藏 */
/* 使用自定义媒体查询，不依赖 Tailwind 的响应式类 */
.mobile-menu-button {
  display: flex;
}

@media (min-width: 640px) {
  .mobile-menu-button {
    display: none !important;
  }
}
