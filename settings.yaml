apiVersion: v1alpha1
kind: Setting
metadata:
  name: theme-aurora-setting
spec:
  forms:
    - group: home
      label: 首页
      formSchema:
        - $formkit: select
          name: header_widget
          id: header_widget
          label: 首页顶部模块
          value: site_title
          options:
            - label: 无
              value: none
            - label: 最新一篇文章
              value: latest_post
            - label: 文章网格（最新五篇文章）
              value: latest_post_grid
            - label: 站点标题
              value: site_title
        - $formkit: select
          if: "$get(header_widget).value !== none"
          name: header_background_type
          id: header_background_type
          key: header_background_type
          label: 首页顶部背景类型
          value: image
          options:
            - label: 手动设置
              value: manual
            - label: 图片
              value: image
            - label: 轮播
              value: carousel
            - label: 视频
              value: video
        - $formkit: text
          if: "$get(header_widget).value !== none && $get(header_background_type).value === manual"
          name: header_background
          id: header_background
          key: header_background
          label: 首页顶部背景
        - $formkit: attachment
          if: "$get(header_widget).value !== none && $get(header_background_type).value === image"
          name: header_background_image
          id: header_background_image
          key: header_background_image
          label: 首页顶部背景图片
        - $formkit: repeater
          if: "$get(header_widget).value !== none && $get(header_background_type).value === carousel"
          name: header_background_carousel
          id: header_background_carousel
          key: header_background_carousel
          label: 轮播图片
          help: "添加多张图片实现轮播效果"
          value: []
          children:
            - $formkit: attachment
              name: image
              label: 图片
              validation: "required"
            - $formkit: text
              name: title
              label: 标题（可选）
            - $formkit: text
              name: link
              label: 链接（可选）
        - $formkit: attachment
          if: "$get(header_widget).value !== none && $get(header_background_type).value === video"
          name: header_background_video
          id: header_background_video
          key: header_background_video
          label: 首页顶部背景视频
          accepts:
            - "video/*"
        - $formkit: color
          if: "$get(header_widget).value === site_title"
          name: title_color
          id: title_color
          key: title_color
          label: 标题文字颜色
          value: "#ffffff"
        - $formkit: select
          name: top_banner_height
          label: 顶部大图高度
          value: half
          options:
            - label: 全屏
              value: full
            - label: 半屏
              value: half
            - label: 三分之一屏
              value: third
          help: "首页顶部大图的高度设置"
        - $formkit: checkbox
          if: $get(header_widget).value !== none && $get(top_banner_height).value == full && $get(header_background_type).value == image
          name: use_banner_as_background
          label: 将 Banner 作为全局背景
          value: false
          help: "启用后，所有页面将使用首页 banner 图片作为背景，实现视觉统一（仅图片类型支持）"
        - $formkit: checkbox
          name: show_category_filter
          label: 显示分类筛选器
          value: true
          help: "在首页顶部显示分类筛选器"

    - group: post_list
      label: 文章列表
      formSchema:
        - $formkit: select
          name: post_list_layout
          label: 文章列表布局
          value: grid_3
          options:
            - label: 网格（一行三列）
              value: grid_3
            - label: 网格（一行两列）
              value: grid_2
            - label: 网格（一行四列）
              value: grid_4
            - label: 单条
              value: single
            - label: 列表
              value: list
            - label: 瀑布流
              value: masonry
          help: "选择单条时，文章卡片的图片将位于左侧；列表布局适合移动端；瀑布流布局需要 JavaScript 支持"
        - $formkit: select
          name: post_image_position
          label: 文章主图片位置
          value: left
          options:
            - label: 左侧
              value: left
            - label: 右侧
              value: right
            - label: 不显示
              value: none
          help: "选择文章卡片中主图片的显示位置，列表布局下无效"
        - $formkit: select
          name: card_style
          label: 卡片样式
          value: default
          options:
            - label: 默认
              value: default
            - label: 简约
              value: minimal
            - label: 圆角
              value: rounded
            - label: 扁平
              value: flat
            - label: 边框
              value: bordered
          help: "选择不同的卡片视觉样式"
        - $formkit: select
          name: card_animation
          label: 卡片动画效果
          value: hover_lift
          options:
            - label: 无动画
              value: none
            - label: 悬停上浮
              value: hover_lift
            - label: 悬停缩放
              value: hover_scale
            - label: 悬停阴影
              value: hover_shadow
            - label: 组合效果
              value: combined
          help: "鼠标悬停时的动画效果"
        - $formkit: select
          name: card_gap
          label: 卡片间距
          value: medium
          options:
            - label: 紧密
              value: tight
            - label: 中等
              value: medium
            - label: 宽松
              value: loose
            - label: 超宽松
              value: extra_loose
          help: "文章卡片之间的间距大小"
        - $formkit: number
          name: posts_per_page
          label: 每页显示数量
          value: 12
          help: "首页每页显示的文章数量"
        - $formkit: checkbox
          name: show_post_excerpt
          label: 显示文章摘要
          value: true
          help: "在文章卡片中显示文章摘要"
        - $formkit: checkbox
          name: show_post_author
          label: 显示文章作者
          value: true
          help: "在文章卡片中显示作者信息"
        - $formkit: checkbox
          name: show_post_date
          label: 显示发布日期
          value: true
          help: "在文章卡片中显示发布日期"
        - $formkit: checkbox
          name: show_post_tags
          label: 显示文章标签
          value: true
          help: "在文章卡片中显示标签"
        - $formkit: checkbox
          name: show_post_visit_count
          label: 显示访问量
          value: false
          help: "在文章卡片中显示访问量统计"
        - $formkit: checkbox
          name: show_post_upvote_count
          label: 显示点赞数
          value: false
          help: "在文章卡片中显示点赞数统计"
        - $formkit: checkbox
          name: show_post_comment_count
          label: 显示评论数
          value: false
          help: "在文章卡片中显示评论数统计"

    - group: archives
      label: 归档页
      formSchema:
        - $formkit: select
          name: timeline_view
          label: 时间线视图
          value: month
          options:
            - label: 时间视图
              value: day
            - label: 月视图
              value: month
            - label: 年视图
              value: year
          help: "选择归档页时间线的显示方式：时间视图按时间倒序排列所有文章，月视图按年月分组，年视图按年份分组"

    - group: global
      label: 全局
      formSchema:
        - $formkit: select
          name: logo_type
          id: logo_type
          label: 菜单栏 Logo 类型
          value: image
          options:
            - label: 文字
              value: text
            - label: 图片
              value: image
        - $formkit: checkbox
          name: show_scroll_button
          label: 显示滚动到顶部按钮
          value: true

    - group: style
      label: 样式
      formSchema:
        - $formkit: select
          name: color_scheme
          label: 默认配色
          value: system
          options:
            - label: 跟随系统
              value: system
            - label: 深色
              value: dark
            - label: 浅色
              value: light

        - $formkit: checkbox
          name: enable_change_color_scheme
          label: 允许访客切换配色
          value: true

    - group: post
      label: 文章
      formSchema:
        - $formkit: checkbox
          name: content_header
          label: 显示文章页面顶部背景
          value: true
        - $formkit: select
          name: content_style
          label: 内容样式
          value: "github"
          options:
            - label: GitHub 风格
              value: github
            - label: Tailwind CSS Typography
              value: tailwind
        - $formkit: select
          name: title_position
          label: 标题位置
          value: "content"
          options:
            - value: "content"
              label: "正文中"
            - value: "cover"
              label: "封面中"
        - $formkit: text
          name: cover_height
          label: 封面图高度
          value: "24rem"
        - $formkit: checkbox
          name: show_upvote_button
          label: 显示点赞按钮
          value: true
        - $formkit: checkbox
          name: show_toc
          label: 显示目录
          value: true
          help: "在文章详情页右侧栏显示目录（TOC）"
        - $formkit: checkbox
          name: show_share_button
          id: show_share_button
          label: 显示分享按钮
          value: true
        - $formkit: select
          if: $get(show_share_button).value
          name: share_item_ids
          key: share_item_ids
          id: share_item_ids
          multiple: true
          sortable: true
          label: 分享平台
          value:
            - wechat
            - x
            - telegram
            - facebook
            - qq
            - qzone
            - weibo
            - douban
            - native
          options:
            - label: 微信
              value: wechat
            - label: X
              value: x
            - label: Telegram
              value: telegram
            - label: Facebook
              value: facebook
            - label: QQ
              value: qq
            - label: QQ 空间
              value: qzone
            - label: 微博
              value: weibo
            - label: 豆瓣
              value: douban
            - label: 系统分享
              value: native

    - group: sidebar
      label: 侧边栏
      formSchema:
        - $formkit: select
          name: sticky_behavior
          label: 侧边栏磁吸效果
          value: none
          options:
            - label: 无
              value: none
            - label: 贴近导航栏
              value: sticky_to_header
            - label: 独立磁吸
              value: sticky_independent
        - $formkit: array
          name: sidebar_widgets
          label: 小部件
          help: "配置侧边栏小部件，每个小部件可以选择显示在左侧或右侧"
          value:
            - value: profile
              position: left
              enabled: true
              order: 1
            - value: announcement
              position: left
              enabled: true
              order: 2
            - value: popular-posts
              position: right
              enabled: true
              order: 1
            - value: categories
              position: right
              enabled: true
              order: 2
            - value: tags
              position: right
              enabled: true
              order: 3
          itemLabels:
            - type: text
              label: $value.value
            - type: text
              label: $value.position
            - type: text
              label: $value.title
          children:
            - $formkit: select
              name: value
              label: 部件类型
              options:
                - label: 站点资料
                  value: profile
                - label: 公告
                  value: announcement
                - label: 热门文章
                  value: popular-posts
                - label: 文章分类
                  value: categories
                - label: 文章标签
                  value: tags
                - label: 最新评论
                  value: latest-comments
            - $formkit: select
              name: position
              label: 模块位置
              help: "选择小部件显示在左侧栏还是右侧栏"
              value: right
              options:
                - label: 左侧
                  value: left
                - label: 右侧
                  value: right
            - $formkit: select
              name: hide_method
              label: 隐藏方式
              help: "选择在哪些设备上隐藏此小部件"
              value: none
              options:
                - label: 不隐藏
                  value: none
                - label: 移动设备隐藏
                  value: mobile
                - label: 平板设备隐藏
                  value: tablet
                - label: 桌面设备隐藏
                  value: desktop
            - $formkit: text
              name: title
              label: 侧边栏标题
              help: "非必填，可覆盖默认侧边栏标题"
              placeholder: "请输入标题内容"
            - $formkit: iconify
              name: icon
              label: 侧边栏图标
              help: "非必填，选择图标或留空使用默认图标"
              format: name
              value-only: true
            - $formkit: number
              name: size
              label: 显示数量
              help: "热门文章和最新评论小部件可配置显示数量，默认5条"
              if: $value.value === 'popular-posts' || $value.value === 'latest-comments'
              value: 5
              min: 1
              max: 20
            - $formkit: checkbox
              name: enabled
              label: 启用
              value: true
            - $formkit: number
              name: order
              label: 排序
              value: 1
              help: "数字越小越靠前，用于控制小部件在同一侧边栏内的显示顺序"

        - $formkit: group
          name: profile
          value:
            logo:
            name:
            motto:
            location:
          children:
            - $formkit: attachment
              name: logo
              label: 头像
            - $formkit: text
              name: name
              label: 名字
              help: "留空则使用站点标题"
            - $formkit: text
              name: motto
              label: 格言/座右铭
            - $formkit: text
              name: location
              label: 位置信息
        - $formkit: group
          name: announcement
          value:
            content:
          children:
            - $formkit: textarea
              name: content
              label: 公告内容
              help: "支持纯文本或 HTML 格式，可设置公告内容"
        - $formkit: repeater
          name: social_media
          label: 社交媒体
          value: []
          children:
            - $formkit: select
              name: icon
              label: 图标
              options:
                - label: 电子邮箱
                  value: i-tabler-mail
                - label: 微信
                  value: i-simple-icons-wechat
                - label: 腾讯 QQ
                  value: i-simple-icons-tencentqq
                - label: 新浪微博
                  value: i-simple-icons-sinaweibo
                - label: 知乎
                  value: i-simple-icons-zhihu
                - label: 豆瓣
                  value: i-simple-icons-douban
                - label: 哔哩哔哩
                  value: i-simple-icons-bilibili
                - label: 抖音 / TikTok
                  value: i-simple-icons-tiktok
                - label: Telegram
                  value: i-simple-icons-telegram
                - label: Facebook
                  value: i-simple-icons-facebook
                - label: Instagram
                  value: i-simple-icons-instagram
                - label: LinkedIn
                  value: i-simple-icons-linkedin
                - label: Twitter
                  value: i-simple-icons-twitter
                - label: Slack
                  value: i-simple-icons-slack
                - label: Discord
                  value: i-simple-icons-discord
                - label: YouTube
                  value: i-simple-icons-youtube
                - label: Steam
                  value: i-simple-icons-steam
                - label: GitHub
                  value: i-simple-icons-github
                - label: GitLab
                  value: i-simple-icons-gitlab
                - label: RSS
                  value: i-simple-icons-rss
            - $formkit: text
              name: name
              label: 名称
            - $formkit: text
              name: url
              label: 链接
              validation: "required"
            - $formkit: select
              name: url_type
              label: 链接类型
              value: normal
              help: "如果选择了图片类型，那么在访客点击之后会使用弹框的形式加载"
              options:
                - label: 跳转链接
                  value: normal
                - label: 图片
                  value: image

    - group: footer
      label: 页脚
      formSchema:
        - $formkit: select
          name: style
          id: style
          key: style
          label: 页脚风格
          value: style_1
          options:
            - label: 风格一
              value: style_1
            - label: 风格二
              value: style_2

        - $formkit: attachment
          name: logo
          label: Logo
          help: 如果不设置，将使用站点设置的 Logo

        - $formkit: text
          name: title
          label: 标题
          help: 如果不设置，将使用站点设置的标题

        - $formkit: textarea
          rows: 3
          name: slogan
          id: slogan
          key: slogan
          if: "$get(style).value === style_2"
          label: 标语

        - $formkit: select
          if: "$get(style).value === style_1"
          name: right_menu
          id: right_menu
          key: right_menu
          label: 右侧菜单
          action: "/api/v1alpha1/menus"
          autoSelect: false
          clearable: true
          requestOption:
            labelField: "spec.displayName"
            valueField: "metadata.name"

        - $formkit: select
          if: "$get(style).value === style_2"
          name: menu_names
          id: menu_names
          key: menu_names
          label: 菜单组
          value: []
          multiple: true
          sortable: true
          action: "/api/v1alpha1/menus"
          requestOption:
            labelField: "spec.displayName"
            valueField: "metadata.name"

        - $formkit: repeater
          name: social_media
          label: 社交媒体
          value: []
          children:
            - $formkit: select
              name: icon
              label: 图标
              options:
                - label: 电子邮箱
                  value: i-tabler-mail
                - label: 微信
                  value: i-simple-icons-wechat
                - label: 腾讯 QQ
                  value: i-simple-icons-tencentqq
                - label: 新浪微博
                  value: i-simple-icons-sinaweibo
                - label: 知乎
                  value: i-simple-icons-zhihu
                - label: 豆瓣
                  value: i-simple-icons-douban
                - label: 哔哩哔哩
                  value: i-simple-icons-bilibili
                - label: 抖音 / TikTok
                  value: i-simple-icons-tiktok
                - label: Telegram
                  value: i-simple-icons-telegram
                - label: Facebook
                  value: i-simple-icons-facebook
                - label: Instagram
                  value: i-simple-icons-instagram
                - label: LinkedIn
                  value: i-simple-icons-linkedin
                - label: Twitter
                  value: i-simple-icons-twitter
                - label: Slack
                  value: i-simple-icons-slack
                - label: Discord
                  value: i-simple-icons-discord
                - label: YouTube
                  value: i-simple-icons-youtube
                - label: Steam
                  value: i-simple-icons-steam
                - label: GitHub
                  value: i-simple-icons-github
                - label: GitLab
                  value: i-simple-icons-gitlab
                - label: RSS
                  value: i-simple-icons-rss
            - $formkit: text
              name: name
              label: 名称
            - $formkit: text
              name: url
              label: 链接
              validation: "required"
            - $formkit: select
              name: url_type
              label: 链接类型
              value: normal
              help: "如果选择了图片类型，那么在访客点击之后会使用弹框的形式加载"
              options:
                - label: 跳转链接
                  value: normal
                - label: 图片
                  value: image

    - group: beian
      label: 备案设置
      formSchema:
        - $formkit: text
          name: icp_text
          label: ICP备案号
        - $formkit: text
          name: icp_link
          label: ICP备案跳转链接
          value: https://beian.miit.gov.cn/

        - $formkit: text
          name: gongan_text
          label: 公安联网备案号
        - $formkit: text
          name: gongan_link
          label: 公安联网备案跳转链接
          value: https://beian.mps.gov.cn/#/query/webSearch
