<!doctype html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{modules/layout :: html(title = |#{page.archives.title} - ${site.title}|, hero = null, content = ~{::content}, head = null, footer = null, sidebar = null, contentClass = null)}"
>
  <th:block th:fragment="content">
    <!-- 使用通用三栏布局 -->
    <th:block th:replace="~{modules/components/three-column-layout :: three-column-layout-auto(mainContent = ~{::main-content}, leftContent = null, rightContent = null)}" />
  </th:block>

  <th:block th:fragment="main-content">
    <div class="rounded-xl bg-white p-6 dark:bg-slate-800">
      <th:block th:if="${archives.total gt 0}">
        <th:block th:with="timelineView=${theme.config.archives.timeline_view != null and not #strings.isEmpty(theme.config.archives.timeline_view) ? theme.config.archives.timeline_view : 'month'}">
          <!-- 使用 th:switch 确保只有一个视图被渲染 -->
          <th:block th:switch="${timelineView}">
            <!-- 日视图时间线 -->
            <th:block th:case="day">
              <th:block th:replace="~{modules/components/timeline :: timeline-day(archives = ${archives})}" />
            </th:block>
            
            <!-- 月视图时间线 -->
            <th:block th:case="month">
              <th:block th:replace="~{modules/components/timeline :: timeline-month(archives = ${archives})}" />
            </th:block>
            
            <!-- 年视图时间线 -->
            <th:block th:case="year">
              <th:block th:replace="~{modules/components/timeline :: timeline-year(archives = ${archives})}" />
            </th:block>
            
            <!-- 默认使用月视图 -->
            <th:block th:case="*">
              <th:block th:replace="~{modules/components/timeline :: timeline-month(archives = ${archives})}" />
            </th:block>
          </th:block>
        </th:block>
      </th:block>

      <!-- 空状态 -->
      <div th:if="${archives.total == 0}" class="flex items-center justify-center py-16">
        <div class="text-center">
          <span class="i-[tabler--file-off] text-6xl text-gray-300 dark:text-slate-600"></span>
          <p class="mt-4 text-sm font-light text-gray-500 dark:text-slate-400" th:text="#{common.noPosts}"></p>
        </div>
      </div>

      <!-- 分页 -->
      <th:block
        th:if="${archives.total gt 0}"
        class="mt-8"
        th:replace="~{modules/pagination :: pagination(context = '/archives/', prevUrl = ${archives.prevUrl}, nextUrl = ${archives.nextUrl}, totalPages = ${archives.totalPages}, page = ${archives.page}, hasPrevious = ${archives.hasPrevious()}, hasNext = ${archives.hasNext()})}"
      />
    </div>
  </th:block>
</html>
